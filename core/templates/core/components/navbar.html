{% load static %}

<nav id="navbar" class="fixed w-full z-50 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-600 shadow-lg">

  <div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl p-4">
    <!-- Logo et menu principal à gauche -->
    <div class="flex items-center space-x-8 rtl:space-x-reverse">
    
      <!-- Logo -->
      <a href="{% url 'index' %}" class="flex items-center transform hover:scale-105 transition-transform duration-300">
        <img src="{% static 'img/logo/Logo_SAVE_ASBL.svg' %}" class="h-8" alt="SAVE Asbl Logo" />
      </a>
      <div class="w-8"></div>
      <!-- Menu principal -->
      <div id="mega-menu-full" class="items-center justify-between font-medium hidden w-full md:flex md:w-auto">
        <ul class="flex flex-col p-4 md:p-0 mt-4 border border-gray-100 rounded-lg bg-gray-50 md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 md:bg-transparent dark:bg-gray-800 md:dark:bg-transparent dark:border-gray-700">
          <li>
            <a href="{% url 'index' %}" class="block py-2 px-3 text-gray-900 rounded-sm hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-blue-500 md:dark:hover:bg-transparent dark:border-gray-700 transition-all duration-300 hover:underline hover:underline-offset-4" aria-current="page">Accueil</a>
          </li>
          <li>
            <button id="mega-menu-full-dropdown-button" data-collapse-toggle="mega-menu-full-dropdown" class="flex items-center justify-between w-full py-2 px-3 text-gray-900 rounded-sm md:w-auto hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-600 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-blue-500 md:dark:hover:bg-transparent dark:border-gray-700 transition-all duration-300 hover:underline hover:underline-offset-4">
              Projets
              <svg class="w-2.5 h-2.5 ms-2.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"/>
              </svg>
            </button>
          </li>
          <li>
            <a href="{% url 'blog' %}" class="block py-2 px-3 text-gray-900 rounded-sm hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-blue-500 md:dark:hover:bg-transparent dark:border-gray-700 transition-all duration-300 hover:underline hover:underline-offset-4">Actualités</a>
          </li>
          <li>
            <a href="{% url 'about' %}" class="block py-2 px-3 text-gray-900 rounded-sm hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-blue-500 md:dark:hover:bg-transparent dark:border-gray-700 transition-all duration-300 hover:underline hover:underline-offset-4">À propos</a>
          </li>
          <li>
            <a href="{% url 'contact' %}" class="block py-2 px-3 text-gray-900 rounded-sm hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-blue-500 md:dark:hover:bg-transparent dark:border-gray-700 transition-all duration-300 hover:underline hover:underline-offset-4">Contact</a>
          </li>
        </ul>
      </div>
    </div>

    <!-- Boutons de droite -->
    <div class="flex items-center space-x-4">
      <!-- Bouton de changement de thème -->
      <button id="theme-toggle" class="p-2 rounded-lg bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 focus:ring-4 focus:ring-gray-300 dark:focus:ring-gray-600 transition-all transform hover:scale-110 duration-300">
        <svg id="theme-toggle-light" class="hidden w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
          <path fill-rule="evenodd" d="M13 3a1 1 0 1 0-2 0v2a1 1 0 1 0 2 0V3ZM6.343 4.929A1 1 0 0 0 4.93 6.343l1.414 1.414a1 1 0 0 0 1.414-1.414L6.343 4.929Zm12.728 1.414a1 1 0 0 0-1.414-1.414l-1.414 1.414a1 1 0 0 0 1.414 1.414l1.414-1.414ZM12 7a5 5 0 1 0 0 10 5 5 0 0 0 0-10Zm-9 4a1 1 0 1 0 0 2h2a1 1 0 1 0 0-2H3Zm16 0a1 1 0 1 0 0 2h2a1 1 0 1 0 0-2h-2ZM7.757 17.657a1 1 0 1 0-1.414-1.414l-1.414 1.414a1 1 0 1 0 1.414 1.414l1.414-1.414Zm9.9-1.414a1 1 0 0 0-1.414 1.414l1.414 1.414a1 1 0 0 0 1.414-1.414l-1.414-1.414ZM13 19a1 1 0 1 0-2 0v2a1 1 0 1 0 2 0v-2Z" clip-rule="evenodd"/>
        </svg>
        <svg id="theme-toggle-dark" class="hidden w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
          <path fill-rule="evenodd" d="M11.675 2.015a.998.998 0 0 0-.403.011C6.09 2.4 2 6.722 2 12c0 5.523 4.477 10 10 10 4.356 0 8.058-2.784 9.43-6.667a1 1 0 0 0-1.02-1.33c-.08.006-.105.005-.127.005h-.001l-.028-.002A5.227 5.227 0 0 0 20 14a8 8 0 0 1-8-8c0-.952.121-1.752.404-2.558a.996.996 0 0 0 .096-.428V3a1 1 0 0 0-.825-.985Z" clip-rule="evenodd"/>
        </svg>
      </button>

      <!-- Bouton Faire un don -->
      <a href="{% url 'donate' %}" class="px-5 py-2.5 text-sm font-medium rounded-lg text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 transition-all transform hover:scale-105 duration-300 shadow-lg hover:shadow-blue-500/50">
        Faire un don
      </a>
    </div>
  </div>

  <!-- Dropdown des projets (caché par défaut) -->
  <div id="mega-menu-full-dropdown" class="hidden mt-1 border-gray-200 shadow-lg bg-white dark:bg-gray-800 border-y dark:border-gray-600">
    <div class="grid max-w-screen-xl px-4 py-5 mx-auto text-gray-900 dark:text-white sm:grid-cols-2 md:px-6">
      <ul>
        <li>
          <a href="{% url 'projects' %}" class="block p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-300 hover:translate-x-2">
            <div class="font-semibold">Projet 1</div>
            <span class="text-sm text-gray-500 dark:text-gray-400">Description du projet 1.</span>
          </a>
        </li>
        <li>
          <a href="{% url 'projects' %}" class="block p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-300 hover:translate-x-2">
            <div class="font-semibold">Projet 2</div>
            <span class="text-sm text-gray-500 dark:text-gray-400">Description du projet 2.</span>
          </a>
        </li>
        <li>
          <a href="{% url 'projects' %}" class="block p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-300 hover:translate-x-2">
            <div class="font-semibold">Projet 3</div>
            <span class="text-sm text-gray-500 dark:text-gray-400">Description du projet 3.</span>
          </a>
        </li>
      </ul>
      <ul>
        <li>
          <a href="{% url 'projects' %}" class="block p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-300 hover:translate-x-2">
            <div class="font-semibold">Projet 4</div>
            <span class="text-sm text-gray-500 dark:text-gray-400">Description du projet 4.</span>
          </a>
        </li>
        <li>
          <a href="{% url 'projects' %}" class="block p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-300 hover:translate-x-2">
            <div class="font-semibold">Projet 5</div>
            <span class="text-sm text-gray-500 dark:text-gray-400">Description du projet 5.</span>
          </a>
        </li>
        <li>
          <a href="{% url 'projects' %}" class="block p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-300 hover:translate-x-2">
            <div class="font-semibold">Projet 6</div>
            <span class="text-sm text-gray-500 dark:text-gray-400">Description du projet 6.</span>
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<script>
  // Gestion du thème
  const themeToggleBtn = document.getElementById('theme-toggle');
  const themeToggleLight = document.getElementById('theme-toggle-light');
  const themeToggleDark = document.getElementById('theme-toggle-dark');

  function updateIcons() {
    if (document.documentElement.classList.contains('dark')) {
      themeToggleLight.classList.remove('hidden');
      themeToggleDark.classList.add('hidden');
    } else {
      themeToggleLight.classList.add('hidden');
      themeToggleDark.classList.remove('hidden');
    }
  }

  if (localStorage.getItem('color-theme') === 'dark' || 
      (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
    document.documentElement.classList.add('dark');
  } else {
    document.documentElement.classList.remove('dark');
  }
  updateIcons();

  themeToggleBtn.addEventListener('click', () => {
    document.documentElement.classList.toggle('dark');
    localStorage.setItem('color-theme', document.documentElement.classList.contains('dark') ? 'dark' : 'light');
    updateIcons();
  });

  // Gestion du dropdown des projets
  const dropdownButton = document.getElementById('mega-menu-full-dropdown-button');
  const dropdownMenu = document.getElementById('mega-menu-full-dropdown');

  dropdownButton.addEventListener('click', () => {
    dropdownMenu.classList.toggle('hidden');
  });

  // Fermer le dropdown si on clique en dehors
  document.addEventListener('click', (event) => {
    if (!dropdownButton.contains(event.target) && !dropdownMenu.contains(event.target)) {
      dropdownMenu.classList.add('hidden');
    }
  });
</script>