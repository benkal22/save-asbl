{% load static %}

<div class="navbar bg-white dark:bg-gray-900 shadow-sm px-6 py-3 flex justify-between items-center">
    <!-- Début de la navbar (mobile) -->
    <div class="navbar-start flex items-center">
      <div class="dropdown lg:hidden">
        <!-- Bouton du menu déroulant pour mobile -->
        <button tabindex="0" class="btn btn-ghost p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-600">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-700 dark:text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16" />
          </svg>
        </button>

        <!-- Menu déroulant pour mobile -->
        <ul tabindex="0" class="menu menu-sm dropdown-content bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-300 rounded-lg mt-3 w-52 p-2 shadow-lg">
          <li><a href="{% url 'index' %}">Accueil</a></li>
          <li><a href="{% url 'about' %}">À propos</a></li>
          <li>
            <details>
              <summary>Projets</summary>
              <ul class="p-2">
                <li><a href="{% url 'projects' %}">Tous les projets</a></li>
                <li><a href="{% url 'project_detail' project_id=1 %}">Détails d'un projet</a></li>
              </ul>
            </details>
          </li>
          <li><a href="{% url 'contact' %}">Contact</a></li>
        </ul>
      </div>
      
      <!-- Logo -->
      <a href="{% url 'index' %}" class="flex items-center space-x-3 rtl:space-x-reverse">
        <img src="{% static 'img/logo/Logo_SAVE_ASBL.svg' %}" class="h-8" alt="SAVE Asbl Logo" />
        <span class="text-2xl font-semibold dark:text-white"></span>
      </a>
    </div>

    <!-- Menu principal (desktop) -->
    <div class="navbar-center hidden lg:flex">
      <ul class="menu menu-horizontal px-4 text-gray-900 dark:text-gray-300">
        <li><a href="{% url 'index' %}">Accueil</a></li>
        <li><a href="{% url 'about' %}">À propos</a></li>
        <li>
          <details>
            <summary>Projets</summary>
            <ul class="p-2">
              <li><a href="{% url 'projects' %}">Tous les projets</a></li>
              <li><a href="{% url 'project_detail' project_id=1 %}">Détails d'un projet</a></li>
            </ul>
          </details>
        </li>
        <li><a href="{% url 'contact' %}">Contact</a></li>
      </ul>
    </div>

    <!-- Bouton de droite -->
    <div class="navbar-end flex items-center space-x-4">
        <!-- Bouton de changement de thème -->
        <button id="theme-toggle" class="p-2 rounded-lg bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 focus:ring-4 focus:ring-gray-300 dark:focus:ring-gray-600 transition-all">
            <svg id="theme-toggle-light" class="hidden w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                <path fill-rule="evenodd" d="M13 3a1 1 0 1 0-2 0v2a1 1 0 1 0 2 0V3ZM6.343 4.929A1 1 0 0 0 4.93 6.343l1.414 1.414a1 1 0 0 0 1.414-1.414L6.343 4.929Zm12.728 1.414a1 1 0 0 0-1.414-1.414l-1.414 1.414a1 1 0 0 0 1.414 1.414l1.414-1.414ZM12 7a5 5 0 1 0 0 10 5 5 0 0 0 0-10Zm-9 4a1 1 0 1 0 0 2h2a1 1 0 1 0 0-2H3Zm16 0a1 1 0 1 0 0 2h2a1 1 0 1 0 0-2h-2ZM7.757 17.657a1 1 0 1 0-1.414-1.414l-1.414 1.414a1 1 0 1 0 1.414 1.414l1.414-1.414Zm9.9-1.414a1 1 0 0 0-1.414 1.414l1.414 1.414a1 1 0 0 0 1.414-1.414l-1.414-1.414ZM13 19a1 1 0 1 0-2 0v2a1 1 0 1 0 2 0v-2Z" clip-rule="evenodd"/>
            </svg>
            <svg id="theme-toggle-dark" class="hidden w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                <path fill-rule="evenodd" d="M11.675 2.015a.998.998 0 0 0-.403.011C6.09 2.4 2 6.722 2 12c0 5.523 4.477 10 10 10 4.356 0 8.058-2.784 9.43-6.667a1 1 0 0 0-1.02-1.33c-.08.006-.105.005-.127.005h-.001l-.028-.002A5.227 5.227 0 0 0 20 14a8 8 0 0 1-8-8c0-.952.121-1.752.404-2.558a.996.996 0 0 0 .096-.428V3a1 1 0 0 0-.825-.985Z" clip-rule="evenodd"/>
            </svg>
        </button>
      
      <!-- Bouton Faire un don -->
      <a href="{% url 'donate' %}" 
      class="px-5 py-2.5 text-sm font-medium rounded-lg text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 transition-all"
      >
        Faire un don
      </a>
    </div>
</div>

<script>
    const themeToggleBtn = document.getElementById('theme-toggle');
    const themeToggleLight = document.getElementById('theme-toggle-light');
    const themeToggleDark = document.getElementById('theme-toggle-dark');

    function updateIcons() {
        if (document.documentElement.classList.contains('dark')) {
            themeToggleLight.classList.remove('hidden');
            themeToggleDark.classList.add('hidden');
        } else {
            themeToggleLight.classList.add('hidden');
            themeToggleDark.classList.remove('hidden');
        }
    }

    if (localStorage.getItem('color-theme') === 'dark' || 
        (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark');
    } else {
        document.documentElement.classList.remove('dark');
    }
    updateIcons();

    themeToggleBtn.addEventListener('click', () => {
        document.documentElement.classList.toggle('dark');
        localStorage.setItem('color-theme', document.documentElement.classList.contains('dark') ? 'dark' : 'light');
        updateIcons();
    });
</script>